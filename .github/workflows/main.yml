# Nome da Actions
name: Snake Game

# Controlador do tempo que ser√° feito a atualiza√ß√£o dos arquivos
on:
  schedule:
    # Ser√° atualizado a cada 5 horas
    - cron: "0 */5 * * *"

  # Permite execu√ß√£o manual
  workflow_dispatch:

# Permiss√µes expl√≠citas para permitir push
permissions:
  contents: write

# Regras
jobs:
  build:
    runs-on: ubuntu-latest
    steps:

      # Checkout do reposit√≥rio
      - name: Checkout do reposit√≥rio
        uses: actions/checkout@v4

      # Gera√ß√£o dos arquivos da cobrinha
      - name: Gerar a anima√ß√£o da cobrinha
        uses: Platane/snk@master
        id: snake-gif
        with:
          github_user_name: Lucas-Laudenir  # Seu usu√°rio
          gif_out_path: dist/github-contribution-grid-snake.gif
          svg_out_path: dist/github-contribution-grid-snake.svg

      # Exibir status do Git
      - name: Verificar status do Git
        run: git status

      # Configurar Git para commit
      - name: Configurar Git
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

      # Commit e push das altera√ß√µes
      - name: Commit e push das altera√ß√µes
        run: |
          git add .
          git commit -m "Atualiza√ß√£o autom√°tica da cobrinha üêç"
          git push origin master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # Atualiza√ß√£o da p√°gina do GitHub Pages
      - name: Atualizar GitHub Pages
        uses: crazy-max/ghaction-github-pages@v2.1.3
        with:
          target_branch: output
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
